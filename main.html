<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEGIS | Video Analytics & Smart Automation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cybernetic -->
    <!-- Application Structure Plan: The application is designed as a single-page, thematic journey. It starts with a high-level introduction to the AEGIS platform, followed by a section on its primary application environments (Home, Factory, Office). The core of the app is an interactive grid where users can click on each of the 9 video analytic capabilities to learn more, encouraging exploration. This is followed by visual explanations of Smart Automation integration and the underlying technology infrastructure using HTML/CSS diagrams. The experience culminates in an interactive, filterable bar chart that allows users to compare the relevance of each feature across the different environments. This structure was chosen to guide the user logically from general awareness to specific details and finally to analytical comparison, making a complex set of features digestible and engaging. -->
    <!-- Visualization & Content Choices:
        - Report Info: AEGIS platform name and purpose -> Goal: Inform/Brand -> Viz/Method: Hero section with strong typography. -> Interaction: Navigation links. -> Justification: Establishes a clear identity and entry point. -> Library/Method: HTML/Tailwind.
        - Report Info: List of 9 core capabilities. -> Goal: Inform/Engage. -> Viz/Method: Interactive card grid. -> Interaction: Click to expand and view details for each feature. -> Justification: More engaging and less overwhelming than a long, static list. Allows users to focus on features of interest. -> Library/Method: Vanilla JS/Tailwind.
        - Report Info: Smart automation for homes, factories, offices. -> Goal: Explain Process/Organize. -> Viz/Method: A responsive HTML/CSS process flow diagram. -> Interaction: Static visual. -> Justification: Clearly visualizes the cause-and-effect relationship between video alerts and automated actions. -> Library/Method: HTML/Tailwind.
        - Report Info: Need for tools & infrastructure. -> Goal: Inform. -> Viz/Method: An HTML/CSS stack diagram. -> Interaction: Static visual. -> Justification: Simplifies the technical components of the system for easier understanding. -> Library/Method: HTML/Tailwind.
        - Report Info: Applicability of features across different environments. -> Goal: Compare/Analyze. -> Viz/Method: Horizontal bar chart. -> Interaction: Filter buttons (All, Home, Factory, Office) update the chart data. -> Justification: Provides a powerful, data-driven comparison tool for users to assess the platform's value for their specific needs. -> Library/Method: Chart.js (Canvas). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1E293B; /* Dark Charcoal-Blue */
            color: #E2E8F0; /* Off-White Text */
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #06B6D4; /* Vibrant Cyan Accent */
        }
        .capability-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .capability-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
        .details-content.open {
            max-height: 500px;
        }
        .btn-filter.active {
            background-color: #06B6D4;
            color: #1E293B;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 500px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
                max-height: 600px;
            }
        }
        .solutions-lab-textarea {
            background-color: #334155;
            color: #E2E8F0;
            border: 1px solid #475569;
            padding: 1rem;
            border-radius: 0.5rem;
            width: 100%;
            height: 150px;
        }
        #solutions-output {
            background-color: #1a2432;
            color: #E2E8F0;
            padding: 1.5rem;
            border-radius: 0.5rem;
            white-space: pre-wrap;
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid #06B6D4;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-gray-800/80 backdrop-blur-md sticky top-0 z-50 shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-bold text-gray-100">AEGIS</h1>
            <nav class="hidden md:flex space-x-8">
                <a href="#overview" class="nav-link text-gray-400 font-medium">Overview</a>
                <a href="#capabilities" class="nav-link text-gray-400 font-medium">Capabilities</a>
                <a href="#automation" class="nav-link text-gray-400 font-medium">Automation</a>
                <a href="#analysis" class="nav-link text-gray-400 font-medium">Analysis</a>
                <a href="#solutions" class="nav-link text-gray-400 font-medium">Solutions Lab</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-gray-400">
                <span class="text-2xl">‚ò∞</span>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 bg-gray-800">
            <a href="#overview" class="block py-2 nav-link text-gray-400 font-medium">Overview</a>
            <a href="#capabilities" class="block py-2 nav-link text-gray-400 font-medium">Capabilities</a>
            <a href="#automation" class="block py-2 nav-link text-gray-400 font-medium">Automation</a>
            <a href="#analysis" class="block py-2 nav-link text-gray-400 font-medium">Analysis</a>
            <a href="#solutions" class="block py-2 nav-link text-gray-400 font-medium">Solutions Lab</a>
        </div>
    </header>

    <main>
        <section id="hero" class="py-20 md:py-32 bg-gray-900 text-gray-100">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-4xl md:text-6xl font-bold leading-tight">Intelligent Video Analytics, <br class="hidden md:block"> Proactive Smart Automation.</h2>
                <p class="mt-6 text-lg text-gray-400 max-w-3xl mx-auto">AEGIS transforms standard video streams into actionable intelligence, securing your environment and automating responses for homes, factories, and offices.</p>
            </div>
        </section>

        <section id="overview" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-100">One Platform, Every Environment</h3>
                    <p class="mt-4 text-gray-400 max-w-2xl mx-auto">AEGIS provides tailored security and automation solutions, whether you're protecting your family, optimizing factory operations, or securing a corporate office.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-10">
                    <div class="bg-gray-800 p-8 rounded-lg shadow-md text-center">
                        <div class="text-5xl mb-4">üè†</div>
                        <h4 class="text-xl font-bold text-gray-100 mb-2">Smart Homes</h4>
                        <p class="text-gray-400">Enhance family safety with intelligent intrusion detection, automated lighting and lock responses, and alerts for unusual activity, right on your phone.</p>
                    </div>
                    <div class="bg-gray-800 p-8 rounded-lg shadow-md text-center">
                        <div class="text-5xl mb-4">üè≠</div>
                        <h4 class="text-xl font-bold text-gray-100 mb-2">Smart Factories</h4>
                        <p class="text-gray-400">Improve operational safety and efficiency with restricted zone monitoring, loitering detection in sensitive areas, and automated access control for vehicles.</p>
                    </div>
                    <div class="bg-gray-800 p-8 rounded-lg shadow-md text-center">
                        <div class="text-5xl mb-4">üè¢</div>
                        <h4 class="text-xl font-bold text-gray-100 mb-2">Smart Offices</h4>
                        <p class="text-gray-400">Secure your workspace with people counting for occupancy management, facial recognition for access control, and detection of unauthorized after-hours presence.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="capabilities" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-100">Core Analytic Capabilities</h3>
                    <p class="mt-4 text-gray-400 max-w-2xl mx-auto">Explore the advanced AI-powered features that form the backbone of the AEGIS platform. Click on any capability to learn more about its tools and applications.</p>
                </div>
                <div id="capabilities-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </div>
        </section>

        <section id="automation" class="py-20">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-100">From Detection to Action: Smart Automation</h3>
                    <p class="mt-4 text-gray-400 max-w-3xl mx-auto">AEGIS doesn't just send alerts; it triggers intelligent, automated responses. This section illustrates how a video analytic event can initiate a chain of actions in your smart environment, enhancing security and efficiency without human intervention.</p>
                </div>
                <div class="bg-gray-800 p-8 rounded-lg shadow-lg">
                    <div class="flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0 md:space-x-6">
                        <div class="text-center flex-1">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-2xl mb-2">üìπ</p>
                                <h5 class="font-bold text-gray-100">1. Video Event Detected</h5>
                                <p class="text-sm text-gray-400">(e.g., Perimeter Intrusion)</p>
                            </div>
                        </div>
                        <div class="text-2xl text-gray-600 font-mono transform rotate-90 md:rotate-0">‚Üí</div>
                        <div class="text-center flex-1">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-2xl mb-2">üß†</p>
                                <h5 class="font-bold text-gray-100">2. AEGIS Analysis</h5>
                                <p class="text-sm text-gray-400">(Event classified & verified)</p>
                            </div>
                        </div>
                        <div class="text-2xl text-gray-600 font-mono transform rotate-90 md:rotate-0">‚Üí</div>
                        <div class="text-center flex-1">
                             <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-2xl mb-2">‚ö°</p>
                                <h5 class="font-bold text-gray-100">3. Automated Response</h5>
                                <p class="text-sm text-gray-400">(e.g., Lights On, Doors Lock)</p>
                            </div>
                        </div>
                        <div class="text-2xl text-gray-600 font-mono transform rotate-90 md:rotate-0">‚Üí</div>
                        <div class="text-center flex-1">
                            <div class="p-4 bg-gray-700 rounded-lg">
                                <p class="text-2xl mb-2">üì±</p>
                                <h5 class="font-bold text-gray-100">4. User Alerted</h5>
                                <p class="text-sm text-gray-400">(Notification with video clip)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center mt-16">
                     <h3 class="text-3xl md:text-4xl font-bold text-gray-100">Infrastructure & Tools</h3>
                    <p class="mt-4 text-gray-400 max-w-3xl mx-auto">AEGIS integrates seamlessly with standard security hardware and offers flexible deployment options to fit your needs, from on-premise servers for maximum control to cloud-based solutions for scalability.</p>
                </div>
                <div class="mt-12 bg-gray-800 p-8 rounded-lg shadow-lg">
                     <div class="grid grid-cols-1 md:grid-cols-5 gap-4 items-center text-center">
                        <div class="p-3 bg-gray-700 rounded">
                            <p class="font-semibold text-gray-100">IP Cameras</p>
                            <p class="text-xs text-gray-400">Existing or New</p>
                        </div>
                        <div class="text-gray-600 text-2xl font-mono hidden md:block">‚Üí</div>
                        <div class="p-3 bg-gray-700 rounded col-span-1 md:col-span-1">
                            <p class="font-semibold text-gray-100">Processing Engine</p>
                            <p class="text-xs text-gray-400">On-Premise or Cloud</p>
                        </div>
                        <div class="text-gray-600 text-2xl font-mono hidden md:block">‚Üí</div>
                        <div class="p-3 bg-gray-700 rounded col-span-1 md:col-span-1">
                             <p class="font-semibold text-gray-100">VMS / Smart Hub</p>
                            <p class="text-xs text-gray-400">Integration Layer</p>
                        </div>
                        <div class="text-gray-600 text-2xl font-mono hidden md:block">‚Üí</div>
                        <div class="p-3 bg-gray-700 rounded col-span-1 md:col-span-1">
                            <p class="font-semibold text-gray-100">User Interface</p>
                            <p class="text-xs text-gray-400">Dashboard & Mobile App</p>
                        </div>
                     </div>
                </div>
            </div>
        </section>

        <section id="analysis" class="py-20 bg-gray-900">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-100">Feature Applicability Analysis</h3>
                    <p class="mt-4 text-gray-400 max-w-2xl mx-auto">Different environments have different priorities. This interactive chart helps you understand which AEGIS capabilities are most impactful for your specific use case. Use the filters to see tailored insights.</p>
                </div>
                <div class="flex justify-center space-x-2 mb-8">
                    <button class="btn-filter active px-4 py-2 text-sm font-medium text-gray-100 bg-gray-700 border border-gray-600 rounded-md hover:bg-gray-600" data-filter="all">All Environments</button>
                    <button class="btn-filter px-4 py-2 text-sm font-medium text-gray-100 bg-gray-700 border border-gray-600 rounded-md hover:bg-gray-600" data-filter="home">Home</button>
                    <button class="btn-filter px-4 py-2 text-sm font-medium text-gray-100 bg-gray-700 border border-gray-600 rounded-md hover:bg-gray-600" data-filter="factory">Factory</button>
                    <button class="btn-filter px-4 py-2 text-sm font-medium text-gray-100 bg-gray-700 border border-gray-600 rounded-md hover:bg-gray-600" data-filter="office">Office</button>
                </div>
                <div class="chart-container">
                    <canvas id="capabilitiesChart"></canvas>
                </div>
            </div>
        </section>
        
        <section id="solutions" class="py-20 bg-gray-800">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <h3 class="text-3xl md:text-4xl font-bold text-gray-100">AI Solutions Builder ‚ú®</h3>
                    <p class="mt-4 text-gray-400 max-w-2xl mx-auto">Describe your unique security challenge below, and our AI will suggest a tailored solution using the most relevant AEGIS capabilities.</p>
                </div>
                <div class="max-w-3xl mx-auto">
                    <textarea id="challenge-input" class="solutions-lab-textarea focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-shadow" placeholder="e.g., 'How can I secure a residential building lobby and deter package theft?'"></textarea>
                    <div class="flex justify-end mt-4">
                        <button id="generate-solution-btn" class="px-6 py-2 bg-cyan-600 text-gray-900 font-bold rounded-md shadow-lg hover:bg-cyan-500 transition-colors flex items-center justify-center space-x-2">
                            <span>Generate Solution</span>
                            <div id="loading-spinner" class="spinner hidden"></div>
                        </button>
                    </div>
                    <div id="solutions-output" class="mt-8 rounded-lg min-h-[100px] flex items-center justify-center p-6 text-gray-400 text-center">
                        Your AI-powered solution will appear here.
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <p class="text-2xl font-bold">AEGIS</p>
            <p class="mt-2 text-gray-400">Secure. Smart. Automated.</p>
            <div class="mt-4">
                <p>&copy; 2025 AEGIS Security Solutions. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const capabilitiesData = [
                {
                    id: 1,
                    icon: 'üë•',
                    title: 'People Counting & Crowd Detection',
                    short_desc: 'Monitors the number of individuals in a designated area.',
                    long_desc: 'This feature provides real-time data on foot traffic and crowd density. It is essential for retail analytics, public space management, and ensuring compliance with occupancy limits. Alerts can be triggered when crowd thresholds are exceeded.',
                    applicability: { home: 3, factory: 7, office: 9 }
                },
                {
                    id: 2,
                    icon: 'üöó',
                    title: 'Object Detection & Tracking',
                    short_desc: 'Identifies and follows people, vehicles, or other objects.',
                    long_desc: 'Using advanced algorithms, AEGIS can distinguish between different types of objects, track their movement paths, and analyze their speed. This is crucial for forensic analysis and real-time threat pursuit.',
                    applicability: { home: 8, factory: 10, office: 9 }
                },
                {
                    id: 3,
                    icon: 'üë§',
                    title: 'Facial Recognition',
                    short_desc: 'Identifies individuals based on known databases.',
                    long_desc: 'Integrates with employee, visitor, or watchlist databases to grant or deny access, identify VIPs, or flag persons of interest. It offers a seamless, touchless access control solution and enhances security protocols.',
                    applicability: { home: 5, factory: 8, office: 10 }
                },
                {
                    id: 4,
                    icon: 'ü™™',
                    title: 'License Plate Recognition (LPR)',
                    short_desc: 'Used for vehicle monitoring and automated gate access.',
                    long_desc: 'LPR automatically captures and transcribes license plate numbers from video streams. It facilitates automated entry/exit for authorized vehicles, monitors parking lots, and assists in identifying suspicious vehicles.',
                            applicability: { home: 4, factory: 10, office: 9 }
                },
                {
                    id: 5,
                    icon: 'üöß',
                    title: 'Perimeter Intrusion Detection',
                    short_desc: 'Alerts if someone crosses a virtual boundary.',
                    long_desc: 'Users can draw virtual tripwires or fences on the camera feed. An alarm is triggered if an object crosses these lines or enters a restricted zone, providing proactive protection for property boundaries.',
                    applicability: { home: 10, factory: 10, office: 7 }
                },
                {
                    id: 6,
                    icon: 'üèÉ',
                    title: 'Behavior & Anomaly Detection',
                    short_desc: 'Recognizes unusual activities like fights or sudden movements.',
                    long_desc: 'The AI learns normal patterns of activity and flags deviations. This includes detecting fights, falls (slip-and-fall incidents), vandalism, or panicked running, enabling faster response to emergencies.',
                    applicability: { home: 7, factory: 9, office: 8 }
                },
                {
                    id: 7,
                    icon: 'üî•',
                    title: 'Fire & Smoke Detection',
                    short_desc: 'Visually spots flames or smoke earlier than traditional sensors.',
                    long_desc: 'Video-based fire detection can often identify signs of fire, such as flames or smoke plumes, faster and more accurately than heat or particle sensors, especially in large open areas or outdoors.',
                    applicability: { home: 9, factory: 10, office: 8 }
                },
                {
                    id: 8,
                    icon: '‚è≥',
                    title: 'Loitering Detection',
                    short_desc: 'Identifies individuals lingering in an area for too long.',
                    long_desc: 'This feature is key to preventing potential criminal activity. Define a zone and a time threshold, and AEGIS will alert security personnel if a person or vehicle remains in that area beyond the set duration.',
                    applicability: { home: 6, factory: 9, office: 7 }
                },
                {
                    id: 9,
                    icon: 'üéí',
                    title: 'Object Left Behind Detection',
                    short_desc: 'Spots unattended objects that might be a security risk.',
                    long_desc: 'Crucial for public transport hubs, lobbies, and high-security areas. AEGIS can detect when an object is placed and abandoned, automatically alerting staff to a potential threat or lost item.',
                    applicability: { home: 2, factory: 7, office: 9 }
                }
            ];

            const capabilitiesGrid = document.getElementById('capabilities-grid');
            capabilitiesData.forEach(cap => {
                const card = document.createElement('div');
                card.className = 'bg-gray-800 rounded-lg shadow-md overflow-hidden';
                card.innerHTML = `
                    <div class="p-6 capability-card">
                        <div class="flex items-start">
                            <div class="text-4xl mr-5">${cap.icon}</div>
                            <div>
                                <h4 class="text-xl font-bold text-gray-100">${cap.title}</h4>
                                <p class="text-gray-400 mt-1">${cap.short_desc}</p>
                            </div>
                        </div>
                    </div>
                    <div class="details-content bg-gray-700 px-6">
                        <p class="text-gray-300 py-4">${cap.long_desc}</p>
                    </div>
                `;
                capabilitiesGrid.appendChild(card);
            });

            capabilitiesGrid.addEventListener('click', function(e) {
                const cardHeader = e.target.closest('.capability-card');
                if (cardHeader) {
                    const content = cardHeader.nextElementSibling;
                    cardHeader.classList.toggle('bg-gray-700');
                    content.classList.toggle('open');
                }
            });

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                link.addEventListener('click', () => mobileMenu.classList.add('hidden'));
            });

            const chartCtx = document.getElementById('capabilitiesChart').getContext('2d');
            const chartLabels = capabilitiesData.map(c => c.title);

            const getChartData = (filter) => {
                if (filter === 'all') {
                    return capabilitiesData.map(c => (c.applicability.home + c.applicability.factory + c.applicability.office) / 3);
                }
                return capabilitiesData.map(c => c.applicability[filter]);
            };

            const chartConfig = {
                type: 'bar',
                data: {
                    labels: chartLabels,
                    datasets: [{
                        label: 'Applicability Score (out of 10)',
                        data: getChartData('all'),
                        backgroundColor: 'rgba(6, 182, 212, 0.7)',
                        borderColor: 'rgba(6, 182, 212, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 10,
                            grid: {
                                color: 'rgba(100, 116, 139, 0.5)'
                            },
                             ticks: {
                                color: '#A0AEC0'
                            }
                        },
                        y: {
                            ticks: {
                                autoSkip: false,
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    return label.length > 25 ? label.substring(0, 25) + '...' : label;
                                },
                                color: '#A0AEC0'
                            },
                             grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` Applicability: ${context.raw.toFixed(1)} / 10`;
                                }
                            }
                        }
                    }
                }
            };

            const myChart = new Chart(chartCtx, chartConfig);

            const filterButtons = document.querySelectorAll('.btn-filter');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.dataset.filter;
                    
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');

                    myChart.data.datasets[0].data = getChartData(filter);
                    myChart.update();
                });
            });

            // Solutions Lab functionality
            const generateSolutionBtn = document.getElementById('generate-solution-btn');
            const challengeInput = document.getElementById('challenge-input');
            const solutionsOutput = document.getElementById('solutions-output');
            const loadingSpinner = document.getElementById('loading-spinner');

            generateSolutionBtn.addEventListener('click', async () => {
                const userQuery = challengeInput.value.trim();
                if (!userQuery) {
                    solutionsOutput.textContent = 'Please describe your security challenge.';
                    return;
                }

                solutionsOutput.textContent = '';
                loadingSpinner.classList.remove('hidden');
                generateSolutionBtn.disabled = true;

                // API call logic with exponential backoff
                const systemPrompt = `You are a world-class solutions architect for the AEGIS video analytics platform. Based on the user's security challenge, suggest the most relevant AEGIS capabilities from the following list. For each suggestion, provide a brief, high-level explanation of why it is a good fit. Focus on a clear, professional, and concise response. The capabilities are: People Counting, Object Detection & Tracking, Facial Recognition, License Plate Recognition (LPR), Perimeter Intrusion Detection, Behavior & Anomaly Detection, Fire & Smoke Detection, Loitering Detection, and Object Left Behind Detection.`;
                const apiKey = "";
                const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=" + apiKey;
                
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const fetchWithRetry = async (url, options, retries = 3) => {
                    for (let i = 0; i < retries; i++) {
                        try {
                            const response = await fetch(url, options);
                            if (response.status === 429 && i < retries - 1) { // 429 is Too Many Requests
                                await new Promise(res => setTimeout(res, Math.pow(2, i) * 1000));
                                continue;
                            }
                            return response;
                        } catch (error) {
                            if (i < retries - 1) {
                                await new Promise(res => setTimeout(res, Math.pow(2, i) * 1000));
                                continue;
                            }
                            throw error;
                        }
                    }
                };

                try {
                    const response = await fetchWithRetry(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    if (text) {
                        solutionsOutput.textContent = text;
                    } else {
                        solutionsOutput.textContent = "Sorry, I couldn't generate a solution at this time. Please try again.";
                    }
                } catch (error) {
                    console.error('Error fetching data:', error);
                    solutionsOutput.textContent = "An error occurred while generating the solution. Please check your network and try again.";
                } finally {
                    loadingSpinner.classList.add('hidden');
                    generateSolutionBtn.disabled = false;
                }
            });
        });
    </script>
</body>
</html>
